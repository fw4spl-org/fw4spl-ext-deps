diff --git a/CMakeLists.txt b/CMakeLists.txt
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -56,7 +56,7 @@
 		src/utilities.cc
 		src/vlog_is_on.cc
 	)
-	
+
 	set(HDRS
 		src/base/commandlineflags.h
 		src/windows/config.h
@@ -74,6 +74,7 @@
 	include_directories(
 		${CMAKE_CURRENT_SOURCE_DIR}/src/windows/
 		${GFLAGS_INCLUDE_DIRS}
+		${CMAKE_CURRENT_BINARY_DIR}/src   #ADDED TO glog-config.h (generated by cmake see CONFIGURE_FILE)
 	)
 
 	mz_add_definition(GLOG_NO_ABBREVIATED_SEVERITIES)
@@ -97,31 +98,44 @@
             src/base/mutex.h src/base/googleinit.h
             src/base/commandlineflags.h src/googletest.h
 	)
-	
+
 	set(HDRS
 		src/glog/log_severity.h
-		src/glog/logging.h 
-		src/glog/raw_logging.h 
-		src/glog/vlog_is_on.h 
+		src/glog/logging.h
+		src/glog/raw_logging.h
+		src/glog/vlog_is_on.h
 		src/glog/stl_logging.h
 	)
 
 	include_directories(
 		${CMAKE_CURRENT_SOURCE_DIR}/src/
-		${CMAKE_CURRENT_BINARY_DIR}/src/		
-		${GFLAGS_INCLUDE_DIRS}
+		${CMAKE_CURRENT_BINARY_DIR}/src/
+		${GFLAGS_INCLUDE_DIRS}     # added include from GFlags
 	)
 
 	mz_add_definition(NO_THREADS)
 	set(GLOG_3LIBS pthread)
         if( HAVE_LIB_UNWIND )
-            set(GLOG_3LIBS ${GLOG_3LIBS} unwind)
+            #set(GLOG_3LIBS ${GLOG_3LIBS} unwind)
         endif()
 endif()
 
 mz_add_flag(GCC -Wall -Wwrite-strings -Woverloaded-virtual -Wno-sign-compare)
-add_library(google-glog STATIC ${SRCS} ${HDRS})
-target_link_libraries(google-glog gflags ${GLOG_3LIBS})
+
+if(BUILD_SHARED_LIBS)
+    add_library(google-glog SHARED ${SRCS} ${HDRS})
+else(BUILD_SHARED_LIBS)
+    add_library(google-glog STATIC ${SRCS} ${HDRS})
+endif()
+
+if(APPLE)
+    target_link_libraries(google-glog ${GFLAGS_LIBRARY_DIRS}/libgflags.dylib ${GLOG_3LIBS})
+elseif(WIN32)
+    target_link_libraries(google-glog ${GFLAGS_LIBRARY_DIRS}/gflags.lib ${GLOG_3LIBS})
+else()
+    target_link_libraries(google-glog ${GFLAGS_LIBRARY_DIRS}/libgflags.so ${GLOG_3LIBS})
+endif()
+
 set_property(TARGET google-glog PROPERTY VERSION 0.3.3)
 set_property(TARGET google-glog PROPERTY SOVERSION 0.3.3)
 mz_target_props(google-glog)
 